<!doctype html>
<html>
<meta charset="utf-8" />
<div id="twitch_player"></div>
<script src="https://player.twitch.tv/js/embed/v1.js"></script>
<script src="https://fastly.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
<script type="text/javascript">
    
    const urlObj = new URL(window.location.href);

    var tc_channel = urlObj.searchParams.get("ch");

    var options = {
        width: 1920,
        height: 1080,
        channel: tc_channel,
        //parent: "www.cloudflare.com"
    };
    var player = new Twitch.Player("twitch_player", options);

    player.addEventListener(Twitch.Player.ENDED, () => {
        console.log(`视频已停止`);
        window.obsstudio.stopStreaming();
    });

    player.addEventListener(Twitch.Player.OFFLINE, () => {
        console.log(`频道已离线`);
        window.obsstudio.stopStreaming();
    });
</script>
</html>
